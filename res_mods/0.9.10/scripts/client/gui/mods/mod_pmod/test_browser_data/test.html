<html>
	<head>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<script type="application/javascript" src="js/jquery.js"></script>
		
		<script>
			$(window).load(function() {
				
				
				
				
				
				
				window.gameCallEx = function (method, params) {
					params || (params = {callback: 'void'});
					window[params.callback] || (window[params.callback] = Function.prototype);
					if (navigator.userAgent.indexOf('Awesomium') > -1) {
						var iframe = $('<iframe>');
						var parsed_params = new Array();
						for(var key in params) {
							parsed_params.push(key + '=' + params[key]);
						}
						iframe.attr('src', 'gamecall://' + method + '?' + parsed_params.join('&'))
						iframe.hide().appendTo('body').remove();
					} else {
						window[params.callback](JSON.stringify(params))
					}
				}
				
				
				window.gameCall = function (method, params) {
					if (navigator.userAgent.indexOf('Awesomium') > -1) {
						var iframe = $('<iframe>');
						var parsed_params = new Array();
						for(var key in params) {
							parsed_params.push(key + '=' + params[key]);
						}
						iframe.attr('src', 'gamecall://' + method + '?' + parsed_params.join('&'))
						iframe.hide().appendTo('body').remove();
					}
				}
				
				
				
				
				
				
				
				
				// Изменить размер окна
				window.onWindowResized = function (json) {
					var data = JSON.parse(json);
					console.log('onWindowResized');
					console.log(data);
					$(window).width(data.width);
					$(window).height(data.height);
				};
				$('#resizeWidow').click(function(e) {
					window.gameCallEx('resizeWidow', {
						/* width: 700, height: 350, */
						width: $('#resizeWidow_width').val(),
						height: $('#resizeWidow_height').val(),
						callback: 'onWindowResized'
					});
				});
				
				
				// Закрыть окно
				$('#closeWidow').click(function(e) {
					window.gameCall('closeWidow', { });
				});
				
				
				
				// Свернуть окно
				$('#reloadWidow').click(function(e) {
					window.gameCall('reloadWidow', { });
				});
				
				
				// Развернуть во весь экран окно
				window.onWindowMaximized = function (json) {
					var data = JSON.parse(json);
					console.log('onWindowMaximized');
					console.log(data);
				};
				$('#maximizeWindow').click(function(e) {
					window.gameCallEx('maximizeWindow', {
						callback: 'onWindowMaximized'
					});
				});		
				
				
				$('#resizeWidow_width').val($(window).width());
				$('#resizeWidow_height').val($(window).height());
				$(window).width(800);
				$(window).height(640);
			});
		</script>
	</head>
	<body>
		
		<div class="ingame_method">
			<p class="title">имя метода: resizeWidow</p>
			<p class="action">действие: изменяет размер окна</p>
			<p class="params">принимаемые параметры: (int)width, (int)height</p>
		
			<div class="call">
				шырина: <input id="resizeWidow_width" value=""></input><br>
				высота: <input id="resizeWidow_height" value=""></input><br>
				<button id="resizeWidow">вызвать</button>
			</div>
		</div>
		
		name: closeWidow<br>
		*close ingame browser window<br>
		<button id="closeWidow">call</button><hr>
		
		name: reloadWidow<br>
		*reaload ingame browser page<br>
		<button id="reloadWidow">call</button><hr>
		
		name: maximizeWindow<br>
		*maximize ingame browser to fullscrean<br>
		*unto callback returned width and height of fullscrean window<br>
		<button id="maximizeWindow">call</button><hr>
		
		
		
	</body>
</html>